# ShipForge — Command Reference

A complete reference of all commands used in the ShipForge project, covering package management, development workflows, version control, and tooling.

---

## pnpm Commands

ShipForge uses [pnpm](https://pnpm.io/) as its package manager. All scripts are defined in `package.json`.

### `pnpm install` / `pnpm i`

Install all project dependencies from `package.json` and update the lockfile.

```bash
pnpm install
```

| Flag            | Description                                      |
|-----------------|--------------------------------------------------|
| `--frozen-lockfile` | Fail if lockfile is out of date (CI use)     |
| `--prod`        | Install only production dependencies             |
| `--no-optional` | Skip optional dependencies                       |

---

### `pnpm dev`

Start the Vite development server with hot module replacement (HMR).

```bash
pnpm dev
```

**Runs:** `vite dev`

| Flag            | Description                                      |
|-----------------|--------------------------------------------------|
| `--port <n>`    | Set the dev server port (default: 5173)          |
| `--host`        | Expose to network (listen on 0.0.0.0)           |
| `--open`        | Open browser automatically on startup            |

**Example:**

```bash
pnpm dev --port 3000 --open
```

---

### `pnpm build`

Create an optimized production build of the SvelteKit application.

```bash
pnpm build
```

**Runs:** `vite build`

The output is generated by the configured SvelteKit adapter (`@sveltejs/adapter-auto`). The `prepare` script (`svelte-kit sync`) runs automatically before the build to generate types.

---

### `pnpm preview`

Preview the production build locally. Must run `pnpm build` first.

```bash
pnpm preview
```

**Runs:** `vite preview`

| Flag            | Description                                      |
|-----------------|--------------------------------------------------|
| `--port <n>`    | Set the preview server port                      |
| `--host`        | Expose to network                                |

---

### `pnpm check`

Run `svelte-kit sync` to generate types, then run `svelte-check` to type-check all `.svelte` and `.ts` files.

```bash
pnpm check
```

**Runs:** `svelte-kit sync && svelte-check`

This is the recommended command before committing or in CI pipelines to catch type errors.

---

### `pnpm check:watch`

Same as `pnpm check` but in watch mode — re-checks on every file change.

```bash
pnpm check:watch
```

**Runs:** `svelte-kit sync && svelte-check --watch`

Useful during active development to get continuous type feedback.

---

### `pnpm lint`

Run Prettier (check mode) and ESLint across the entire project.

```bash
pnpm lint
```

**Runs:** `prettier --check . && eslint .`

This command does **not** modify files. It exits with a non-zero code if any file has formatting or lint issues.

---

### `pnpm format`

Auto-format all files using Prettier (with `prettier-plugin-svelte` for `.svelte` files).

```bash
pnpm format
```

**Runs:** `prettier --write .`

Run this before committing to ensure consistent code style.

---

### `pnpm test`

Run the full test suite: unit tests followed by end-to-end tests.

```bash
pnpm test
```

**Runs:** `pnpm run test:unit -- --run && pnpm run test:e2e`

The `--run` flag ensures unit tests execute once and exit (no watch mode). E2E tests run only if unit tests pass.

---

### `pnpm test:unit`

Run unit tests with Vitest.

```bash
pnpm test:unit
```

**Runs:** `vitest`

| Flag            | Description                                      |
|-----------------|--------------------------------------------------|
| `--run`         | Run once and exit (no watch mode)                |
| `--reporter verbose` | Show detailed test names                   |
| `--coverage`    | Generate code coverage report                    |

**Example:**

```bash
pnpm test:unit -- --run --reporter verbose
```

---

### `pnpm test:e2e`

Run end-to-end tests with Playwright.

```bash
pnpm test:e2e
```

**Runs:** `playwright test`

| Flag                  | Description                                |
|-----------------------|--------------------------------------------|
| `--headed`            | Run tests in visible browser windows       |
| `--project=chromium`  | Run only in a specific browser             |
| `--debug`             | Run in debug mode with inspector           |
| `--ui`                | Open Playwright's interactive UI mode      |

**Example:**

```bash
pnpm test:e2e -- --headed --project=chromium
```

---

## Git Commands

### Repository Setup

#### `git init`

Initialize a new Git repository in the current directory.

```bash
git init
```

#### `git clone <url>`

Clone a remote repository to a local directory.

```bash
git clone https://github.com/username/udemy-hp.git
```

| Flag               | Description                              |
|--------------------|------------------------------------------|
| `--depth 1`        | Shallow clone (latest commit only)       |
| `--branch <name>`  | Clone a specific branch                  |

---

### Daily Workflow

#### `git status`

Show the state of the working tree — staged, unstaged, and untracked files.

```bash
git status
```

| Flag        | Description                                       |
|-------------|---------------------------------------------------|
| `-s`        | Short format output                               |
| `-b`        | Show branch info in short format                  |

#### `git add <files>`

Stage file changes for the next commit.

```bash
git add src/lib/components/Button.svelte
git add .                 # Stage all changes (use with caution)
```

| Flag        | Description                                       |
|-------------|---------------------------------------------------|
| `-p`        | Interactively select hunks to stage               |

#### `git commit`

Record staged changes as a new commit.

```bash
git commit -m "feat: add Button component variant prop"
```

| Flag        | Description                                       |
|-------------|---------------------------------------------------|
| `-m "msg"`  | Provide the commit message inline                 |
| `--amend`   | Modify the most recent commit                     |
| `-a`        | Automatically stage modified (not new) files      |

#### `git push`

Upload local commits to the remote repository.

```bash
git push origin main
```

| Flag             | Description                                  |
|------------------|----------------------------------------------|
| `-u origin main` | Set upstream tracking for the branch         |
| `--tags`         | Push all local tags                          |

#### `git pull`

Fetch and integrate remote changes into the current branch.

```bash
git pull origin main
```

| Flag          | Description                                     |
|---------------|-------------------------------------------------|
| `--rebase`    | Rebase local commits on top of fetched commits  |
| `--ff-only`   | Only fast-forward; fail if diverged             |

---

### Branching

#### `git branch`

List, create, or delete branches.

```bash
git branch                    # List local branches
git branch feature/nav        # Create a new branch
git branch -d feature/nav     # Delete a merged branch
```

| Flag        | Description                                       |
|-------------|---------------------------------------------------|
| `-a`        | List all branches (local + remote)                |
| `-d`        | Delete a branch (safe — only if merged)           |
| `-D`        | Force delete a branch                             |

#### `git checkout`

Switch branches or restore files.

```bash
git checkout feature/nav              # Switch to a branch
git checkout -b feature/new-card      # Create and switch to a new branch
```

#### `git merge`

Merge a branch into the current branch.

```bash
git merge feature/nav
```

| Flag           | Description                                    |
|----------------|------------------------------------------------|
| `--no-ff`      | Create a merge commit even for fast-forwards   |
| `--squash`     | Squash all commits into a single staged change |

---

### History and Inspection

#### `git log`

View commit history.

```bash
git log
git log --oneline --graph --decorate -20
```

| Flag             | Description                                  |
|------------------|----------------------------------------------|
| `--oneline`      | One line per commit                          |
| `--graph`        | ASCII graph of branch structure              |
| `--decorate`     | Show branch and tag names                    |
| `-n <number>`    | Limit to n commits                           |
| `--author="name"`| Filter by author                             |

#### `git diff`

Show changes between commits, staging area, and working tree.

```bash
git diff                  # Unstaged changes
git diff --staged         # Staged changes
git diff main..feature    # Differences between branches
```

#### `git stash`

Temporarily store uncommitted changes.

```bash
git stash                 # Stash current changes
git stash pop             # Re-apply and remove the latest stash
git stash list            # List all stashes
git stash drop            # Discard the latest stash
```

| Flag                | Description                               |
|---------------------|-------------------------------------------|
| `-u`                | Include untracked files                   |
| `-m "description"`  | Add a descriptive message to the stash    |

---

## SvelteKit CLI

### `npx sv create`

Scaffold a new SvelteKit project interactively.

```bash
npx sv create my-project
```

This prompts for template selection, TypeScript preference, and optional add-ons (ESLint, Prettier, Playwright, Vitest, etc.). ShipForge was scaffolded with all of these enabled.

---

### `svelte-kit sync`

Generate TypeScript types from the SvelteKit project structure (route params, `$lib` aliases, etc.).

```bash
npx svelte-kit sync
```

This is run automatically by the `prepare` script on install and before `check` / `check:watch`. The generated files live in `.svelte-kit/types/`.

**Note:** In ShipForge, the `prepare` script handles failures gracefully:

```json
"prepare": "svelte-kit sync || echo ''"
```

---

## Node.js

### `node --version`

Print the installed Node.js version.

```bash
node --version
# Example output: v20.11.0
```

### `pnpm --version`

Print the installed pnpm version.

```bash
pnpm --version
# Example output: 9.1.0
```

### `npm --version`

Print the installed npm version (bundled with Node.js).

```bash
npm --version
# Example output: 10.2.4
```

---

## Quick Reference Table

| Task                          | Command                                   |
|-------------------------------|-------------------------------------------|
| Install dependencies          | `pnpm install`                            |
| Start dev server              | `pnpm dev`                                |
| Production build              | `pnpm build`                              |
| Preview production build      | `pnpm preview`                            |
| Type check                    | `pnpm check`                              |
| Type check (watch mode)       | `pnpm check:watch`                        |
| Lint (check only)             | `pnpm lint`                               |
| Format code                   | `pnpm format`                             |
| Run all tests                 | `pnpm test`                               |
| Run unit tests                | `pnpm test:unit`                          |
| Run E2E tests                 | `pnpm test:e2e`                           |
| Generate SvelteKit types      | `npx svelte-kit sync`                     |
| Stage and commit              | `git add <files> && git commit -m "msg"`  |
| Push to remote                | `git push origin <branch>`                |
